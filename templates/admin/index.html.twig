{% extends 'base.html.twig' %}
{# templates/admin/index.html.twig #}

{% block title %}Admin ‚Ä¢ Dashboard{% endblock %}

{% block body %}
<style>
  :root{
    --bg0:#070b14;
    --bg1:#0b1220;
    --panel: rgba(255,255,255,.06);
    --panel2: rgba(255,255,255,.10);
    --border: rgba(255,255,255,.12);
    --text: rgba(255,255,255,.92);
    --muted: rgba(255,255,255,.68);
    --brand: #22c55e;
    --brand2:#16a34a;
    --danger:#ef4444;
    --shadow: 0 12px 32px rgba(0,0,0,.35);
    --radius: 18px;
  }

  /* Layout */
  .admin-shell{
    min-height: 100vh;
    background:
      radial-gradient(900px 420px at 15% 10%, rgba(34,197,94,.18), transparent 60%),
      radial-gradient(900px 520px at 85% 20%, rgba(56,189,248,.12), transparent 60%),
      linear-gradient(180deg, var(--bg0), var(--bg1));
    color: var(--text);
    display: grid;
    grid-template-columns: 220px 1fr; /* sidebar menor */
  }

  /* Sidebar */
  .admin-sidebar{
    padding: 14px;
    border-right: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    position: sticky;
    top: 0;
    height: 100vh;
  }

  .brand{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 10px;
    padding: 12px 12px;
    border: 1px solid var(--border);
    border-radius: 16px;
    background: rgba(255,255,255,.04);
    box-shadow: var(--shadow);
    margin-bottom: 12px;
  }
  .brand .title{
    font-weight: 850;
    letter-spacing: .2px;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .brand .pill{
    font-size: 11px;
    padding: 6px 9px;
    border-radius: 999px;
    border: 1px solid rgba(34,197,94,.35);
    background: rgba(34,197,94,.12);
    color: rgba(220,255,233,.95);
    white-space: nowrap;
    flex: 0 0 auto;
  }

  .nav{
    display:flex;
    flex-direction:column;
    gap: 8px;
    margin-top: 8px;
  }
  .nav a{
    display:flex;
    align-items:center;
    gap: 10px;
    padding: 10px 10px;
    border-radius: 14px;
    text-decoration:none;
    color: var(--text);
    border: 1px solid transparent;
    background: rgba(255,255,255,.03);
    transition: transform .08s ease, background .15s ease, border-color .15s ease;
    font-size: 14px;
  }
  .nav a:hover{
    transform: translateY(-1px);
    background: rgba(255,255,255,.06);
    border-color: var(--border);
  }
  .nav .ico{ width: 20px; text-align:center; }
  .nav small{
    color: var(--muted);
    margin-left:auto;
    font-size: 11px;
  }

  .sidebar-footer{
    position:absolute;
    left: 14px;
    right: 14px;
    bottom: 14px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
  }
  .logout-btn{
    width: 100%;
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 10px;
    padding: 10px 10px;
    border-radius: 14px;
    border: 1px solid rgba(239,68,68,.35);
    background: rgba(239,68,68,.10);
    color: rgba(255,230,230,.95);
    text-decoration:none;
    transition: background .15s ease, transform .08s ease;
    font-size: 13px;
  }
  .logout-btn:hover{ background: rgba(239,68,68,.16); transform: translateY(-1px); }

  /* Main */
  .admin-main{
    padding: 18px;
  }

  .topbar{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap: 14px;
    padding: 16px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: rgba(255,255,255,.04);
    box-shadow: var(--shadow);
  }
  .topbar h1{
    margin: 0;
    font-size: 22px;
    letter-spacing: .2px;
  }
  .topbar .sub{
    margin: 6px 0 0 0;
    color: var(--muted);
    font-size: 14px;
  }

  .user-chip{
    display:flex;
    align-items:center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 999px;
    border: 1px solid rgba(34,197,94,.30);
    background: rgba(34,197,94,.10);
    max-width: 520px;
  }
  .user-chip .dot{
    width: 10px; height: 10px;
    border-radius: 50%;
    background: var(--brand);
    box-shadow: 0 0 0 4px rgba(34,197,94,.15);
    flex: 0 0 auto;
  }
  .user-chip .meta{
    display:flex;
    flex-direction:column;
    line-height: 1.1;
    min-width: 0;
  }
  .user-chip strong{
    font-size: 13px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 260px;
  }
  .user-chip small{
    color: rgba(220,255,233,.85);
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 260px;
  }
  .user-chip .mini-logout{
    margin-left: 10px;
    padding: 8px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.18);
    background: rgba(255,255,255,.06);
    color: var(--text);
    text-decoration:none;
    font-size: 12px;
    white-space: nowrap;
  }
  .user-chip .mini-logout:hover{ background: rgba(255,255,255,.10); }

  .user-chip.danger{
    border-color: rgba(239,68,68,.35);
    background: rgba(239,68,68,.10);
  }
  .user-chip.danger .dot{ background: var(--danger); box-shadow: 0 0 0 4px rgba(239,68,68,.15); }
  .user-chip.danger small{ color: rgba(255,230,230,.9); }

  /* Cards */
  .grid{
    margin-top: 14px;
    display:grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 14px;
  }

  .card{
    grid-column: span 4;
    display:flex;
    align-items:center;
    gap: 12px;
    padding: 16px 16px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    background: rgba(255,255,255,.04);
    box-shadow: var(--shadow);
    text-decoration:none;
    color: var(--text);
    transition: transform .08s ease, background .15s ease, border-color .15s ease;
    min-height: 92px;
  }
  .card:hover{
    transform: translateY(-2px);
    background: rgba(255,255,255,.06);
    border-color: rgba(34,197,94,.35);
  }
  .card .icon{
    width: 46px; height: 46px;
    border-radius: 14px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(34,197,94,.12);
    border: 1px solid rgba(34,197,94,.25);
    flex: 0 0 auto;
    font-size: 20px;
  }
  .card h3{
    margin: 0;
    font-size: 16px;
  }
  .card p{
    margin: 4px 0 0 0;
    color: var(--muted);
    font-size: 13px;
  }
  .card .chev{
    margin-left:auto;
    color: rgba(255,255,255,.55);
    font-size: 18px;
  }

  /* Panels + buttons */
  .panel{
    margin-top: 14px;
    padding: 16px 16px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    background: rgba(255,255,255,.03);
  }
  .panel h2{
    margin: 0 0 8px 0;
    font-size: 16px;
  }
  .panel p{
    margin: 0 0 12px 0;
    color: var(--muted);
    font-size: 13px;
  }
  .actions{
    display:flex;
    flex-wrap:wrap;
    gap: 10px;
  }
  .btn{
    display:inline-flex;
    align-items:center;
    gap: 8px;
    padding: 10px 12px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,.16);
    background: rgba(255,255,255,.06);
    color: var(--text);
    text-decoration:none;
    font-size: 13px;
  }
  .btn:hover{ background: rgba(255,255,255,.10); }
  .btn.primary{
    border-color: rgba(34,197,94,.35);
    background: rgba(34,197,94,.14);
  }
  .btn.primary:hover{ background: rgba(34,197,94,.20); }

  /* Responsivo */
  @media (max-width: 980px){
    .admin-shell{ grid-template-columns: 1fr; }

    .admin-sidebar{
      position: relative;
      height: auto;
      border-right: none;
      border-bottom: 1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .brand{ margin-bottom: 0; box-shadow: none; }

    .nav{
      flex-direction:row;
      flex-wrap:wrap;
      gap: 8px;
      margin-top: 0;
    }
    .nav a{ padding: 10px 10px; }
    .nav small{ display:none; }
    .sidebar-footer{ display:none; }

    .card{ grid-column: span 6; }
  }

  @media (max-width: 560px){
    .topbar{ flex-direction:column; align-items:stretch; }
    .user-chip{ border-radius: 16px; justify-content:space-between; }
    .card{ grid-column: span 12; }
    .user-chip strong, .user-chip small{ max-width: 100%; }
  }
</style>

<div class="admin-shell">
  <aside class="admin-sidebar" aria-label="Navega√ß√£o do Admin">
    <div class="brand">
      <div class="title">üçΩÔ∏è Restaurant Admin</div>
      <div class="pill">Painel</div>
    </div>

    <nav class="nav">
      <a href="{{ path('admin_menu_index') }}">
        <span class="ico">üìã</span> Menus
        <small>gerir</small>
      </a>

      <a href="{{ path('admin_commande_index') }}">
        <span class="ico">üßæ</span> Commandes
        <small>pedidos</small>
      </a>

      <a href="{{ path('admin_employe_index') }}">
        <span class="ico">üë•</span> Employ√©s
        <small>equipa</small>
      </a>
    </nav>

    <div class="sidebar-footer">
      <a class="logout-btn" href="{{ path('app_logout') }}">üö™ Logout</a>
    </div>
  </aside>

  <main class="admin-main">
    <header class="topbar">
      <div>
        <h1>Admin Dashboard</h1>
        <p class="sub">Acesso r√°pido a Menus, Commandes e Employ√©s.</p>
      </div>

      {% if app.user %}
        <div class="user-chip" title="Sess√£o ativa">
          <span class="dot" aria-hidden="true"></span>
          <div class="meta">
            <strong>{{ app.user.userIdentifier }}</strong>
            <small>{{ app.user.roles|join(', ') }}</small>
          </div>
          <a class="mini-logout" href="{{ path('app_logout') }}">Sair</a>
        </div>
      {% else %}
        <div class="user-chip danger">
          <span class="dot" aria-hidden="true"></span>
          <div class="meta">
            <strong>N√£o autenticado</strong>
            <small>Fa√ßa login para continuar</small>
          </div>
        </div>
      {% endif %}
    </header>

    {% if app.user %}
      <section class="grid" aria-label="Acessos r√°pidos">
        <a class="card" href="{{ path('admin_menu_index') }}">
          <div class="icon">üìã</div>
          <div>
            <h3>Menus</h3>
            <p>Gerir pratos, categorias e pre√ßos</p>
          </div>
          <div class="chev" aria-hidden="true">‚Üí</div>
        </a>

        <a class="card" href="{{ path('admin_commande_index') }}">
          <div class="icon">üßæ</div>
          <div>
            <h3>Commandes</h3>
            <p>Ver e acompanhar pedidos</p>
          </div>
          <div class="chev" aria-hidden="true">‚Üí</div>
        </a>

        <a class="card" href="{{ path('admin_employe_index') }}">
          <div class="icon">üë•</div>
          <div>
            <h3>Employ√©s</h3>
            <p>Gerir equipa e permiss√µes</p>
          </div>
          <div class="chev" aria-hidden="true">‚Üí</div>
        </a>
      </section>

      {# ‚úÖ Sem rotas *_new para n√£o dar erro #}
      <section class="panel" aria-label="Atalhos">
        <h2>Atalhos</h2>
        <p>Acessos diretos para as p√°ginas principais.</p>

        <div class="actions">
          <a class="btn primary" href="{{ path('admin_menu_index') }}">üìã Ver Menus</a>
          <a class="btn primary" href="{{ path('admin_commande_index') }}">üßæ Ver Commandes</a>
          <a class="btn primary" href="{{ path('admin_employe_index') }}">üë• Ver Employ√©s</a>
        </div>
      </section>

    {% else %}
      <section class="panel">
        <h2>Precisas autenticar</h2>
        <p>N√£o h√° sess√£o ativa. Entra para aceder ao painel de administra√ß√£o.</p>
        <a class="btn primary" href="{{ path('app_login') }}">üîê Ir para Login</a>
      </section>
    {% endif %}
  </main>
</div>
{% endblock %}
